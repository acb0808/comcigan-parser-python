# comcigan-parser-python

ğŸ“˜ğŸ•˜ ë³¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” `Python` í™˜ê²½ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì»´ì‹œê°„ ì•Œë¦¬ë¯¸ ì‹œê°„í‘œ íŒŒì‹± ë¼ì´ë¸ŒëŸ¬ë¦¬ ì…ë‹ˆë‹¤.  

ë³¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ê´‘ëª…ê²½ì˜íšŒê³„ê³ ë“±í•™êµì— ë‹¤ë‹ˆê³  ìˆëŠ” ê²ƒìœ¼ë¡œ ì¶”ì •ë˜ëŠ” [ì´ê·¼í˜](https://github.com/leegeunhyeok) ë‹˜ì˜ `Node.js` íŒŒì‹± ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ `Python`ì–¸ì–´ë¡œ ë³€í™˜ í•œ ê²ƒì…ë‹ˆë‹¤.

ìì„¸í•œ ì„¸ë¶€ ë¼ì´ì„ ìŠ¤ë‚˜ ì •ë³´ë¥¼ ì•Œê³ ì‹¶ìœ¼ì‹œë‹¤ë©´ `Node.js` ë¼ì´ë¸ŒëŸ¬ë¦¬ [ê¹ƒí—ˆë¸Œ](https://github.com/leegeunhyeok/comcigan-parser/)ë¥¼ ì°¸ê³ í•˜ì—¬ ì£¼ì„¸ìš”.

ë³¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” [ì»´ì‹œê°„](https://ì»´ì‹œê°„í•™ìƒ.kr) í™ˆí˜ì´ì§€ì—ì„œ ë“±ë¡ëœ í•™êµì˜ **ì‹œê°„í‘œ** ë°ì´í„°ë¥¼ íŒŒì‹±í•˜ì—¬ ì œê³µí•©ë‹ˆë‹¤.

## ê¸°ëŠ¥

- í•™êµëª… ì…ë ¥ í›„ ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥
- í•™ê¸‰ ì‹œê°„í‘œ ë°ì´í„° ì œê³µ

## ì„¸ë¶€ì‚¬í•­

> ìì„¸í•œ [ì„¸ë¶€ì‚¬í•­](https://github.com/leegeunhyeok/comcigan-parser/)ì„ í™•ì¸í•´ì£¼ì„¸ìš” ì•„ë˜ëŠ” [ì›ì‘ì](https://github.com/leegeunhyeok)ë¶„ì´ ë§Œë“œì‹  ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤.

- [ê´‘ëª…ê²½ì˜íšŒê³„ê³ ë“±í•™êµ ì¹´ì¹´ì˜¤ ìë™ì‘ë‹µ API ì±—ë´‡](https://github.com/leegeunhyeok/GMMAHS-KAKAO)
- [ê´‘ëª…ê²½ì˜íšŒê³„ê³ ë“±í•™êµ ì¹´ì¹´ì˜¤ ì˜¤í”ˆë¹Œë” i ì±—ë´‡](https://github.com/leegeunhyeok/GMMAHS-KAKAO-i)

## ì‚¬ìš©ì „

ì»´ì‹œê°„ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” í•™êµì˜ ì‹œê°„í‘œ ë°ì´í„°ë¥¼ ì‰½ê²Œ ìˆ˜ì§‘í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


> (ì£¼ì˜!) ë³¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ë¹„ê³µì‹ì ìœ¼ë¡œ ì»´ì‹œê°„ ì„œë¹„ìŠ¤ì˜ ë°ì´í„°ë¥¼ íŒŒì‹±í•˜ë©°, ìƒì—…ì ì¸ ìš©ë„ë¡œ ì‚¬ìš©í•˜ë‹¤ ë¬¸ì œê°€ ë°œìƒí•  ê²½ìš° ë³¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°œë°œìëŠ” ì±…ì„ì„ ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.

```bash
pip install bs4
pip install requests
pip install js2py
```

í˜¹ì€ [comcigan](https://pypi.org/project/comcigan/#description) íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ì…”ë„ ë˜‘ê°™ì€ ê²°ê³¼ê°€ ë‚˜ì˜µë‹ˆë‹¤
```bash
pip install comcigan
```

## ê°œë°œ ë¬¸ì„œ

### Timetable

Timetable í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ì—¬ ì‚¬ìš©í•©ë‹ˆë‹¤.

ëª¨ë“ˆì„ ë¶ˆëŸ¬ì˜¤ë©´ Timetable í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```py
import comcigan_parser
timetable = comcigan_parser.Timetable();
```

---

### Timetable.init()

ì¸ìŠ¤í„´ìŠ¤ ì •ë³´ë¥¼ ì´ˆê¸°í™” í•©ë‹ˆë‹¤.  
ì˜µì…˜ì„ ì¶”ê°€í•˜ì—¬ ì‚¬ìš©ì ì„¤ì •ì„ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```py
timetable.init(options);
```

| Parameter |  Type  | Required |
| :-------- | :----: | :------: |
| option    | object |    X     |

ì˜µì…˜ ì •ë³´ëŠ” ì•„ë˜ í‘œ ì°¸ê³ 

| Option   | Value  | default | Required |
| :------- | :----: | :-----: | :------: |
| maxGrade | number |    3    |    X     |
| cache    | number |    0    |    X     |

- `maxGrade`: ìµœëŒ€ í•™ë…„ì„ ì§€ì •í•©ë‹ˆë‹¤. (ì´ˆë“±: 6, ì¤‘/ê³ ë“±: 3)
- `cache`: ì‹œê°„í‘œ ë°ì´í„° ìºì‹± ì‹œê°„(ms)ì„ ì§€ì •í•©ë‹ˆë‹¤ (ê¸°ë³¸ê°’: 0 - ë¹„í™œì„±)
  - ì‹œê°„ì„ ì§€ì •í•˜ë©´, ë°ì´í„° ì¡°íšŒ ì‹œ ì§€ì •í•œ ì‹œê°„ë§Œí¼ ì„ì‹œë¡œ ë³´ê´€í•˜ê³  ìˆë‹¤ê°€, ì´í›„ ìƒˆë¡œìš´ ì¡°íšŒí•  ë•Œ ë³´ê´€í•˜ë˜ ê²°ê³¼ ë°ì´í„°ë¥¼ ì¦‰ì‹œ ë°˜í™˜í•©ë‹ˆë‹¤.
  - ì§€ì •í•œ ìºì‹± ì‹œê°„ì´ ì§€ë‚˜ë©´ ìƒˆë¡œ ìˆ˜ì§‘í•˜ë©°, ë‹¤ì‹œ ìºì‹± ì‹œê°„ë§Œí¼ ë³´ê´€í•©ë‹ˆë‹¤.

Return - `None`

---

### Timetable.search()

í•™êµ ì •ë³´ë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤.

> ì»´ì‹œê°„ì— ë“±ë¡ëœ í•™êµê°€ ì•„ë‹ ê²½ìš° ê²€ìƒ‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

```py
timetable.search(keyword);
```

| Parameter |  Type  | Required |
| :-------- | :----: | :------: |
| keyword   | string |    O     |

Return - `list <í•™êµë°ì´í„°[]>`

í•™êµ ë°ì´í„°ëŠ” [ì—¬ê¸°](#í•™êµ-ë°ì´í„°) ì°¸ê³ 

---

### Timetable.setSchool()

ì‹œê°„í‘œë¥¼ ë¶ˆëŸ¬ì˜¬ í•™êµë¥¼ ì§€ì •í•©ë‹ˆë‹¤. í•™êµ ì½”ë“œëŠ” í•™êµ ê²€ìƒ‰ì„ í†µí•´ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```py
timetable.setSchool(schoolCode);
```

| Parameter |  Type  | Required |
| :-------- | :----: | :------: |
| keyword   | number |    O     |

Return - `None`

---

### Timetable.getTimetable()

ì§€ì •í•œ í•™êµì˜ ì‹œê°„í‘œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.

```py
timetable.getTimetable();
```

Return - `dict<ì‹œê°„í‘œ>`

---

### Timetable.getClassTime()

ê° êµì‹œë³„ ìˆ˜ì—… ì‹œì‘/ì¢…ë£Œ ì‹œê°„ì •ë³´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

```py
timetable.getClassTime();
```

Return - `list<string>`

---

## ì‚¬ìš© ë°©ë²•

### Timetable ì¸ìŠ¤í„´ìŠ¤ ìƒì„±

`comcigan-parser` ëª¨ë“ˆì„ ë¶ˆëŸ¬ì˜¨ í›„ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.  
ìƒì„± ì‹œì—  `option`ì¸ìë¥¼ ì‚¬ìš©í•˜ì—¬ ì˜µì…˜ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- ì˜µì…˜ì€ [ì—¬ê¸°](#timetableinit) ì°¸ì¡°

```py
import comcigan_parser
timetable = comcigan_parser.Timetable();
```

---

### í•™êµ ê²€ìƒ‰

ì»´ì‹œê°„ì— ë“±ë¡ë˜ì–´ìˆëŠ” í•™êµë¥¼ ê²€ìƒ‰í•˜ì—¬ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

> ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ëŠ” ê²½ìš° ì˜ˆì™¸ê°€ ë°œìƒí•©ë‹ˆë‹¤.

```py
timetable.search('í•˜ì•ˆ')
  # schoolList
  # [{'_': 24966, 'region': 'ê²½ê¸°', 'name': 'í•˜ì•ˆì¤‘í•™êµ', 'code': 65187}, {'_': 24966, 'region': 'ê²½ê¸°', 'name': 'í•˜ì•ˆë¶ì¤‘í•™êµ', 'code': 36051}]
```

---

### í•™êµ ì„¤ì •

ì»´ì‹œê°„ì— ë“±ë¡ë˜ì–´ìˆëŠ” í•™êµë¥¼ ê²€ìƒ‰í•˜ê³  ì¸ìŠ¤í„´ìŠ¤ì— ë“±ë¡í•©ë‹ˆë‹¤.

> í•™êµê°€ ì—¬ëŸ¬ê°œ ì¡°íšŒë˜ê±°ë‚˜ ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ëŠ” ê²½ìš° ì˜ˆì™¸ê°€ ë°œìƒí•©ë‹ˆë‹¤.

```py
mySchool = timetable.findSchool({'region':'ê²½ê¸°', 'name':'í•˜ì•ˆë¶ì¤‘í•™êµ'}, schoolList)

timetable.setSchool(mySchool['code'])
```

---

### ì‹œê°„í‘œ ì¡°íšŒ

ë“±ë¡í•œ í•™êµì˜ ì‹œê°„í‘œ ë°ì´í„°ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.

```py
  result = timetable.getTimetable()

  # result[í•™ë…„][ë°˜][ìš”ì¼][êµì‹œ]
  # ìš”ì¼: (ì›”: 0 ~ ê¸ˆ: 4)
  # êµì‹œ: 1êµì‹œ(0), 2êµì‹œ(1), 3êµì‹œ(2)..
  # 3í•™ë…„ 10ë°˜ í™”ìš”ì¼ 2êµì‹œ ì‹œê°„í‘œ
  console.log(result[3][10][1][1]);
```

---

### ìˆ˜ì—…ì‹œê°„ ì •ë³´ ì¡°íšŒ

ìˆ˜ì—… ì‹œê°„ ì •ë³´ë¥¼ ë°˜í™˜í™ë‹ˆë‹¤.

```py
timetable.getClassTime();
```

---

## í™œìš© ì˜ˆì‹œ

sample.

## ë°ì´í„° í˜•ì‹

### í•™êµ ë°ì´í„°

```py
{
  '_': 24966, # ì•Œ ìˆ˜ ì—†ëŠ” ì½”ë“œ
  'region':'ê²½ê¸°', # ì§€ì—­
  'name': 'í•˜ì•ˆë¶ì¤‘í•™êµ', # í•™êµëª…
  'code': 13209 # í•™êµì½”ë“œ
}
```

### ì‹œê°„í‘œ ë°ì´í„°

```py
{
  "1": {
    # 1í•™ë…„
    "1": [ # 1ë°˜
      [ # ì›”ìš”ì¼ ì‹œê°„í‘œ
        {
          'grade': 1,                   # í•™ë…„
          'class': 1,                   # ë°˜
          'weekday': 1,                 # ìš”ì¼ (1: ì›” ~ 5: ê¸ˆ)
          'weekdayString': 'ì›”',         # ìš”ì¼ ë¬¸ìì—´
          'classTime': 1,              # êµì‹œ
          'teacher': 'ì´ì£¼',            # ì„ ìƒë‹˜ ì„±í•¨
          'subject': 'ê¸°ìˆ '     # ê³¼ëª©ëª…
        },
        {
          'grade': 1,
          'class': 1,
          'weekday': 1,
          'weekdayString': 'ì›”',
          'classTime': 2,
          'teacher': 'í™©ê²½',
          'subject': 'ì‚¬íšŒ'
        }
      ],
      [í™”ìš”ì¼ì‹œê°„í‘œ],
      [ìˆ˜ìš”ì¼ì‹œê°„í‘œ],
      [ëª©ìš”ì¼ì‹œê°„í‘œ],
      [ê¸ˆìš”ì¼ì‹œê°„í‘œ]
    ],
    "2": [ # 2ë°˜
      [ì›”ìš”ì¼ì‹œê°„í‘œ],
      [í™”ìš”ì¼ì‹œê°„í‘œ],
      [ìˆ˜ìš”ì¼ì‹œê°„í‘œ],
      [ëª©ìš”ì¼ì‹œê°„í‘œ],
      [ê¸ˆìš”ì¼ì‹œê°„í‘œ]
    ],
    "3": [
      [], [], [], [], []
    ],
    ...
  },
  "2": {
    # 2í•™ë…„
  },
  "3": {
    # 3í•™ë…„
  }
}
```

ê° ì‹œê°„í‘œ ë°ì´í„° í˜•ì‹

- ê° ìš”ì¼ `Array` ì—ëŠ” ì•„ë˜ì™€ ê°™ì€ í˜•ì‹ì˜ ë°ì´í„°ê°€ í¬í•¨ë˜ì–´ìˆìŒ

```py
[
  {
    'grade': 1,                   # í•™ë…„
    'class': 1,                   # ë°˜
    'weekday': 1,                 # ìš”ì¼ (1: ì›” ~ 5: ê¸ˆ)
    'weekdayString': 'ì›”',         # ìš”ì¼ ë¬¸ìì—´
    'classTime': 1,              # êµì‹œ
    'teacher': 'ì´ì£¼',            # ì„ ìƒë‹˜ ì„±í•¨
    'subject': 'ê¸°ìˆ '     # ê³¼ëª©ëª…
  },
  {
    'grade': 1,
    'class': 1,
    'weekday': 1,
    'weekdayString': 'ì›”',
    'classTime': 2,
    'teacher': 'í™©ê²½',
    'subject': 'ì‚¬íšŒ'
  }
  ...
]
```

### ìˆ˜ì—…ì‹œê°„ ì •ë³´

```py
['1(09:15)', '2(10:10)', '3(11:05)', '4(12:00)', '5(13:35)', '6(14:30)', '7(15:25)', '8(16:20)']
```

ì‘ìš© ë°©ë²•

```py
result = timetable.getTimetable()

# 3í•™ë…„ 8ë°˜ ì‹œê°„í‘œ (ì›” ~ ê¸ˆ)
print(result[3][8])

# 1í•™ë…„ 1ë°˜ ì›”ìš”ì¼ ì‹œê°„í‘œ
print(result[1][1][0]);

# 2í•™ë…„ 5ë°˜ ê¸ˆìš”ì¼ 3êµì‹œ ì‹œê°„í‘œ
print(result[2][5][4][2]);
```

- í•™ë…„, ë°˜ì˜ ê²½ìš° ì¸ë±ìŠ¤ ìƒê´€ ì—†ì´ ë™ì¼í•˜ê²Œ ì ‘ê·¼
  - ì˜ˆ: 1í•™ë…„ 3ë°˜(result[1][3]), 3í•™ë…„ 9ë°˜(result[3][9])
- ìš”ì¼, êµì‹œì˜ ê²½ìš° ì¸ë±ìŠ¤ëŠ” 0ë¶€í„° ì‹œì‘í•˜ë¯€ë¡œ -1 ê°’ì„ í†µí•´ ì ‘ê·¼
  - ì˜ˆ: ì›”ìš”ì¼ 3êµì‹œ(result[..][..][0][2])

## ë¬¸ì œ ì‹ ê³ 

ì‹œê°„í‘œ íŒŒì‹±ì´ ë˜ì§€ ì•Šê±°ë‚˜ ë¬¸ì œê°€ ë°œìƒí•œ ê²½ìš° [ì´ìŠˆ](https://github.com/leegeunhyeok/comcigan-parser/issues)ë¥¼ ë‚¨ê²¨ì£¼ì„¸ìš”.

